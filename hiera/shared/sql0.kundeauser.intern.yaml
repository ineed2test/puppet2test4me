---

classes:

  - mysql::server
  - mysql::client::install
  - mysql::server::install
#  - mysql::db
mysql::server::package_name: mariadb-server
##mysql::server::package_endure: 5.7.11-4.1.el7
mysql::server::service_name: mariadb
mysql::server::root_password: blah
mysql::server::remove_default_accounts: false
mysql::server::override_options:
  'mysqld':
    bind-address: '0.0.0.0'
    expire_logs_days: '10'
    max_binlog_size: 100M
    log_slave_updates: '1'
    auto_increment_increment: '2'
    default-storage-engine: 'innodb'
    character-set-server: 'utf8mb4'
    collation-server: 'utf8mb4_general_ci'
    init-connect: 'SET NAMES utf8'
    lower_case_table_names: '1'
    log_bin: /var/log/mysql/mysql-bin.log
    max_connections: '75'
    query_cache_size: 256M
    key_buffer_size: 32M
    innodb_buffer_pool_size: 256M
    innodb_print_all_deadlocks: 'ON'
    slow_query_log: 'ON'
    general_log_file: '/var/lib/mysql/sql01.log'
    mysql::server::databases:
  'kundea':
    ensure: present
    charset: utf8
mysql::server::users:
  'kurt@%':
    ensure: present
# MariaDB [(none)]> SELECT PASSWORD('pwkundea');
    password_hash: '*4553641D99805ACAE38C64D2F2CB1357E85FC2B3'
mysql::server::grants:
  'kurt@%/kundea.*':
    ensure: present
    options:
      - GRANT
    privileges:
      - all
    table: kundea.*
    user: kurt@%

#mysql::db:
#  'kundea1':
#    user: kurt
#    password: pwkurt
#    dbname: kundea
#    host: '%'
#    grant: ALL